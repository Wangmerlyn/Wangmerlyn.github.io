name: pages-build

on:
  workflow_dispatch:
  push:
    branches: [main]

permissions:
  contents: read

jobs:
  disable-jekyll:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Add .nojekyll marker
        run: echo "" > .nojekyll
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: .

  # Document reason: GitHub Pages still defaults to Jekyll. Astro output is not Jekyll. A minimal
  # job that uploads the repo with a .nojekyll file prevents Jekyll from parsing Astro source files.
